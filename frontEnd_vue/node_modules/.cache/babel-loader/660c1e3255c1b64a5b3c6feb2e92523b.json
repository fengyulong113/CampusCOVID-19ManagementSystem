{"remainingRequest":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\src\\components\\student\\healthTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\src\\components\\student\\healthTable.vue","mtime":1649515230156},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1627202897183},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1648636261085}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovZnlsX1dlYi9DYW1wdXNDT1ZJRC0xOU1hbmFnZW1lbnRTeXN0ZW0vZnJvbnRFbmRfdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0VXNlckRhdGFCeVRva2VuLCBnZXRIZWFsdGhOb3dEYXlCeWlkUmVxdWVzdCwgc2V0SGVhbHRoUmVxdWVzdCB9IGZyb20gIkAvYXBpL3JlcXVlc3QiOwppbXBvcnQgeyBmb3JtYXRJRCB9IGZyb20gJ0AvYXBpL3V0aWxzJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoZWFsdGhTaG93OiB0cnVlLAogICAgICAvL+WBpeW6t+ihqOWNleaYvuekui/pmpDol48KICAgICAgdXNlckRhdGFMaXN0OiBbXSwKICAgICAgLy/nlKjmiLfmlbDmja4KICAgICAgc3ViRnJvbURhdGE6IFtdLAogICAgICAvL+aPkOS6pOeahOihqOWNleaVsOaNrgogICAgICBoZWFsdGhGb3JtOiB7CiAgICAgICAgdGVtcDogIiIsCiAgICAgICAgaXNIb3Q6ICIiLAogICAgICAgIGlzTGVhdmU6ICIiLAogICAgICAgIFBDUjogIiIKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGdldFVzZXJEYXRhQnlUb2tlbigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBfdGhpcy51c2VyRGF0YUxpc3QucHVzaChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHJlcyksIHt9LCB7CiAgICAgICAgaWQ6IGZvcm1hdElEKHJlcy5pZCkKICAgICAgfSkpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTsKICAgIH0pOwogICAgdGhpcy5nZXROb3dEYXkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKg0KICAgICAqIOiOt+WPluW9k+WkqeafkOeUqOaIt+aKpeihqOW5tuS4lOWGs+WumuaYr+WQpuWFgeiuuOWhq+WGmQ0KICAgICAqLwogICAgZ2V0Tm93RGF5OiBmdW5jdGlvbiBnZXROb3dEYXkoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZ2V0SGVhbHRoTm93RGF5QnlpZFJlcXVlc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmxlbmd0aCA9PSAwKSBfdGhpczIuaGVhbHRoU2hvdyA9IHRydWU7ZWxzZSB7CiAgICAgICAgICBfdGhpczIuaGVhbHRoU2hvdyA9IGZhbHNlOwoKICAgICAgICAgIF90aGlzMi5zdWJGcm9tRGF0YS5wdXNoKHJlc1swXSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICog5o+Q5Lqk5YGl5bq36KGo5Y2VDQogICAgICovCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmhlYWx0aEZvcm0udGVtcCB8fCAhdGhpcy5oZWFsdGhGb3JtLmlzSG90IHx8ICF0aGlzLmhlYWx0aEZvcm0uaXNMZWF2ZSB8fCAhdGhpcy5oZWFsdGhGb3JtLlBDUikgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLloavmiqXooajkuI3lj6/nlZnnqboiKTtlbHNlIHsKICAgICAgICB2YXIgcmVnID0gL14oKFswLTldK1wuWzAtOV0qWzEtOV1bMC05XSopfChbMC05XSpbMS05XVswLTldKlwuWzAtOV0rKXwoWzAtOV0qWzEtOV1bMC05XSopKSQvOwogICAgICAgIHZhciB0ZW1wQm9vbCA9IHJlZy50ZXN0KHRoaXMuaGVhbHRoRm9ybS50ZW1wKTsKICAgICAgICBpZiAoIXRlbXBCb29sKSB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIuS9k+a4qeivt+i+k+WFpeaVsOWtlyIpO2Vsc2UgewogICAgICAgICAgc2V0SGVhbHRoUmVxdWVzdCh7CiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLmhlYWx0aEZvcm0udGVtcCwKICAgICAgICAgICAgaXNIb3Q6IHRoaXMuaGVhbHRoRm9ybS5pc0hvdCwKICAgICAgICAgICAgaXNMZWF2ZTogdGhpcy5oZWFsdGhGb3JtLmlzTGVhdmUsCiAgICAgICAgICAgIFBDUjogdGhpcy5oZWFsdGhGb3JtLlBDUgogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICLmj5DkuqTmiJDlip8iCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKHJlcy5sZW5ndGggIT0gMCkgewogICAgICAgICAgICAgIF90aGlzMy5nZXROb3dEYXkoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOaPkOS6pOWBpeW6t+ihqOWNleW8ueeqlw0KICAgICAqLwogICAgcG9wVXA6IGZ1bmN0aW9uIHBvcFVwKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuJGNvbmZpcm0oIuaPkOS6pOWBpeW6t+aKpeihqCwg5piv5ZCm57un57utPyIsICLmj5DnpLoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQub25TdWJtaXQoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC4kbWVzc2FnZS5pbmZvKCLlt7Llj5bmtojmj5DkuqQiKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["healthTable.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <el-card>\r\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align: center\">\r\n            <span>健康信息上报</span>\r\n          </div>\r\n          <el-table :data=\"userDataList\" border style=\"width: 100%\">\r\n            <el-table-column prop=\"username\" label=\"姓名\"> </el-table-column>\r\n            <el-table-column prop=\"classes\" label=\"班级\"> </el-table-column>\r\n            <el-table-column prop=\"id\" label=\"学号\"> </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n        <el-divider></el-divider>\r\n\r\n        <el-card v-if=\"!healthShow\">\r\n          <div slot=\"header\" style=\"text-align: center\">\r\n            <span>今日检测情况</span>\r\n          </div>\r\n          <el-alert title=\"今日申请表提交成功\" type=\"success\" center show-icon>\r\n          </el-alert>\r\n          <el-table :data=\"subFromData\" border style=\"width: 100%\">\r\n            <el-table-column prop=\"temperature\" label=\"当前体温\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"isHot\" label=\"是否发热、咳嗽\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"isLeave\" label=\"是否离开过学校\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"PCR\" label=\"核酸检测是否为阴性\">\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n\r\n        <el-card v-else-if=\"healthShow\">\r\n          <el-form ref=\"form\" :model=\"healthForm\" label-width=\"150px\">\r\n            <el-form-item label=\"当前体温\">\r\n              <el-input v-model=\"healthForm.temp\" style=\"width: 130px\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"是否发热、咳嗽\">\r\n              <el-radio-group v-model=\"healthForm.isHot\">\r\n                <el-radio label=\"否\"></el-radio>\r\n                <el-radio label=\"是\"></el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"是否离开过学校\">\r\n              <el-radio-group v-model=\"healthForm.isLeave\">\r\n                <el-radio label=\"否\"></el-radio>\r\n                <el-radio label=\"是\"></el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"核酸检测是否为阴性\">\r\n              <el-radio-group v-model=\"healthForm.PCR\">\r\n                <el-radio label=\"否\"></el-radio>\r\n                <el-radio label=\"是\"></el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"popUp\">提交</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getUserDataByToken,\r\n  getHealthNowDayByidRequest,\r\n  setHealthRequest,\r\n} from \"@/api/request\";\r\nimport { formatID } from '@/api/utils';\r\nexport default {\r\n  data() {\r\n    return {\r\n      healthShow: true, //健康表单显示/隐藏\r\n      userDataList: [], //用户数据\r\n      subFromData: [], //提交的表单数据\r\n      healthForm: {\r\n        temp: \"\",\r\n        isHot: \"\",\r\n        isLeave: \"\",\r\n        PCR:\"\",\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    getUserDataByToken()\r\n      .then((res) => {\r\n        this.userDataList.push({\r\n          ...res,\r\n          id:formatID(res.id)\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.getNowDay();\r\n  },\r\n  methods: {\r\n    /**\r\n     * 获取当天某用户报表并且决定是否允许填写\r\n     */\r\n    getNowDay() {\r\n      getHealthNowDayByidRequest().then((res) => {\r\n        if (res.length == 0) this.healthShow = true;\r\n        else {\r\n          this.healthShow = false;\r\n          this.subFromData.push(res[0]);\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 提交健康表单\r\n     */\r\n    onSubmit() {\r\n      if (\r\n        !this.healthForm.temp ||\r\n        !this.healthForm.isHot ||\r\n        !this.healthForm.isLeave ||\r\n        !this.healthForm.PCR\r\n      )\r\n        this.$message.warning(\"填报表不可留空\");\r\n      else {\r\n        let reg =\r\n          /^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$/;\r\n        let tempBool = reg.test(this.healthForm.temp);\r\n        if (!tempBool) this.$message.warning(\"体温请输入数字\");\r\n        else {\r\n          setHealthRequest({\r\n            temperature: this.healthForm.temp,\r\n            isHot: this.healthForm.isHot,\r\n            isLeave: this.healthForm.isLeave,\r\n            PCR:this.healthForm.PCR\r\n          }).then((res) => {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"提交成功\",\r\n            });\r\n            if (res.length != 0) {\r\n              this.getNowDay();\r\n            }\r\n          });\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * 提交健康表单弹窗\r\n     */\r\n    popUp() {\r\n      this.$confirm(\"提交健康报表, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          this.onSubmit();\r\n        })\r\n        .catch(() => {\r\n          this.$message.info(\"已取消提交\");\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>\r\n"],"sourceRoot":"src/components/student"}]}