{"remainingRequest":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\src\\components\\student\\myNotice.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\src\\components\\student\\myNotice.vue","mtime":1649513130137},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1627202897183},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1648636261085}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovZnlsX1dlYi9DYW1wdXNDT1ZJRC0xOU1hbmFnZW1lbnRTeXN0ZW0vZnJvbnRFbmRfdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0Tm90aWNlUmVxdWVzdCwgZ2V0Tm90aWNlUmVhZFJlcXVlc3QsIGdvVW5yZWFkUmVxdWVzdCwgZ29SZWFkUmVxdWVzdCB9IGZyb20gIkAvYXBpL3JlcXVlc3QiOwppbXBvcnQgeyBmb3JtYXRUaW1lIH0gZnJvbSAnQC9hcGkvdXRpbHMnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5vdGljZU51bTogMCwKICAgICAgLy/pgJrnn6XmgLvmlbAKICAgICAgYWxsTm90aWNlRGF0YTogW10sCiAgICAgIC8v6I635Y+W55qE5omA5pyJ6YCa55+lCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBwYWdlU2l6ZTogNSwKICAgICAgcGFnZU5vOiAxCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0QWxsTm90aWNlKHRoaXMucGFnZVNpemUsIHRoaXMucGFnZU5vKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKg0KICAgICAqIOaIkeeahOmAmuefpeWIhumhteiOt+WPluaVsOaNruS4juaVsOmHjw0KICAgICAqICovCiAgICBnZXRBbGxOb3RpY2U6IGZ1bmN0aW9uIGdldEFsbE5vdGljZShwYWdlTnVtLCBjdXJyUGFnZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZ2V0Tm90aWNlUmVxdWVzdCh7CiAgICAgICAgcGFnZU51bTogcGFnZU51bSwKICAgICAgICBjdXJyUGFnZTogY3VyclBhZ2UgLSAxCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLm5vdGljZU51bSA9IHJlcy50b3RhbDsKICAgICAgICByZXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICB2LnJlYWRUeXBlID0gIuacquivuyI7CiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMuYWxsTm90aWNlRGF0YSA9IHJlcy5kYXRhLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXRlbSksIHt9LCB7CiAgICAgICAgICAgIGNyZWF0ZXRpbWU6IGZvcm1hdFRpbWUoaXRlbS5jcmVhdGV0aW1lKQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIF90aGlzLmdldFJlYWQoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICog6I635Y+W55qE5oiR6YCa55+l5bey6K+75YiX6KGoKOS+m+W3suivu+acquivu+eKtuaAgea4suafkykNCiAgICAgKi8KICAgIGdldFJlYWQ6IGZ1bmN0aW9uIGdldFJlYWQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZ2V0Tm90aWNlUmVhZFJlcXVlc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgdmFyIHZhbCA9IGl0ZW0ubl9pZDsKCiAgICAgICAgICBfdGhpczIuYWxsTm90aWNlRGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICBpZiAodmFsID09PSB2YWx1ZS5uX2lkKSB7CiAgICAgICAgICAgICAgdmFsdWUucmVhZFR5cGUgPSAi5bey6K+7IjsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOW3suivu+S4juacquivu+i9rOaNog0KICAgICAqIEBwYXJhbSBpbmRleA0KICAgICAqIEBwYXJhbSByb3cNCiAgICAgKi8KICAgIHJlYWROOiBmdW5jdGlvbiByZWFkTihfLCByb3cpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBnb1VucmVhZFJlcXVlc3QoewogICAgICAgIG5faWQ6IHJvdy5uX2lkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMy4kbWVzc2FnZS5zdWNjZXNzKCLlt7Lkv67mlLnkuLrmnKror7siKTsKCiAgICAgICAgX3RoaXMzLmdldEFsbE5vdGljZShfdGhpczMucGFnZVNpemUsIF90aGlzMy5wYWdlTm8pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIHJlYWRZOiBmdW5jdGlvbiByZWFkWShfLCByb3cpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICBnb1JlYWRSZXF1ZXN0KHsKICAgICAgICBuX2lkOiByb3cubl9pZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczQuZ2V0UmVhZCgpOwoKICAgICAgICBfdGhpczQuJG1lc3NhZ2Uuc3VjY2Vzcygi5bey5L+u5pS55Li65bey6K+7Iik7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgLy/liIbpobUKICAgIGhhbmRsZVNpemVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWw7CiAgICAgIHRoaXMuZ2V0QWxsTm90aWNlKHRoaXMucGFnZVNpemUsIHRoaXMucGFnZU5vKTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhZ2VObyA9IHZhbDsKICAgICAgdGhpcy5nZXRBbGxOb3RpY2UodGhpcy5wYWdlU2l6ZSwgdGhpcy5wYWdlTm8pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["myNotice.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <el-card>\r\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align: center\">\r\n            <span>我的通知</span>\r\n          </div>\r\n\r\n          <el-table\r\n            :data=\"allNoticeData\"\r\n            border\r\n            :default-sort=\"{ prop: 'date', order: 'descending' }\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-table-column prop=\"createtime\" label=\"发布时间\"></el-table-column>\r\n            <el-table-column prop=\"title\" label=\"主题\"></el-table-column>\r\n            <el-table-column prop=\"content\" label=\"内容\"></el-table-column>\r\n            <el-table-column prop=\"readType\" label=\"状态\"></el-table-column>\r\n            <el-table-column label=\"操作\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  style=\"padding: 3px 0\"\r\n                  type=\"text\"\r\n                  @click=\"readN(scope.$index, scope.row)\"\r\n                >\r\n                  未读\r\n                </el-button>\r\n                <el-button\r\n                  style=\"padding: 3px 0\"\r\n                  type=\"text\"\r\n                  @click=\"readY(scope.$index, scope.row)\"\r\n                >\r\n                  已读\r\n                </el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n\r\n          <div class=\"block\" style=\"text-align: center; margin-top: 20px\">\r\n            <el-pagination\r\n              @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleCurrentChange\"\r\n              :current-page=\"currentPage\"\r\n              :page-sizes=\"[5, 10, 15, 20, 25]\"\r\n              :page-size=\"5\"\r\n              layout=\"total, sizes, prev, pager, next, jumper\"\r\n              :total=\"noticeNum\"\r\n            >\r\n            </el-pagination>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getNoticeRequest,\r\n  getNoticeReadRequest,\r\n  goUnreadRequest,\r\n  goReadRequest,\r\n} from \"@/api/request\";\r\nimport { formatTime } from '@/api/utils';\r\nexport default {\r\n  data() {\r\n    return {\r\n      noticeNum: 0, //通知总数\r\n      allNoticeData: [], //获取的所有通知\r\n      currentPage: 1,\r\n      pageSize: 5,\r\n      pageNo: 1,\r\n    };\r\n  },\r\n  created() {\r\n    this.getAllNotice(this.pageSize, this.pageNo);\r\n  },\r\n  methods: {\r\n    /**\r\n     * 我的通知分页获取数据与数量\r\n     * */\r\n    getAllNotice(pageNum, currPage) {\r\n      getNoticeRequest({ pageNum: pageNum, currPage: currPage - 1 })\r\n        .then((res) => {\r\n          this.noticeNum = res.total;\r\n          res.data.forEach((v) => {\r\n            v.readType = \"未读\";\r\n          });\r\n          this.allNoticeData = res.data.map(item => {\r\n            return {\r\n              ...item,\r\n              createtime: formatTime(item.createtime)\r\n            }\r\n          });\r\n          this.getRead();\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n    /**\r\n     * 获取的我通知已读列表(供已读未读状态渲染)\r\n     */\r\n    getRead() {\r\n      getNoticeReadRequest()\r\n        .then((res) => {\r\n          res.forEach((item) => {\r\n            let val = item.n_id;\r\n            this.allNoticeData.forEach((value) => {\r\n              if (val === value.n_id) {\r\n                value.readType = \"已读\";\r\n              }\r\n            });\r\n          });\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n    /**\r\n     * 已读与未读转换\r\n     * @param index\r\n     * @param row\r\n     */\r\n    readN(_, row) {\r\n      goUnreadRequest({ n_id: row.n_id })\r\n        .then((res) => {\r\n          this.$message.success(\"已修改为未读\");\r\n          this.getAllNotice(this.pageSize, this.pageNo);\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n    readY(_, row) {\r\n      goReadRequest({ n_id:row.n_id })\r\n        .then((res) => {\r\n          this.getRead();\r\n          this.$message.success(\"已修改为已读\");\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n\r\n    //分页\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.getAllNotice(this.pageSize, this.pageNo);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pageNo = val;\r\n      this.getAllNotice(this.pageSize, this.pageNo);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"],"sourceRoot":"src/components/student"}]}