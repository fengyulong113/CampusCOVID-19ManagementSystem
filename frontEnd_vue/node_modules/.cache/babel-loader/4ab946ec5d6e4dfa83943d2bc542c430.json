{"remainingRequest":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\src\\components\\student\\volunteer.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\src\\components\\student\\volunteer.vue","mtime":1649516078577},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1627202897183},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1648636261085}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovZnlsX1dlYi9DYW1wdXNDT1ZJRC0xOU1hbmFnZW1lbnRTeXN0ZW0vZnJvbnRFbmRfdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0VXNlckRhdGFCeVRva2VuLCBnZXRIZWFsdGhOb3dEYXlCeWlkUmVxdWVzdCwgZ2V0RW50ZXJWb2x1bnRlZXJSZXF1c2V0LCBnZXRBbGxWb2x1bnRlZXJSZXF1ZXN0LCBnZXRWb2x1bnRlZXJCeUlkUmVxdWVzdCB9IGZyb20gIkAvYXBpL3JlcXVlc3QiOwppbXBvcnQgeyBmb3JtYXRJRCwgZm9ybWF0WWVhciB9IGZyb20gIkAvYXBpL3V0aWxzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJ2b2x1bnRlZXIiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VySW5mbzogIiIsCiAgICAgIC8v55So5oi35Liq5Lq65L+h5oGvCiAgICAgIHZvbHVudGVlckxpc3Q6IFtdLAogICAgICAvL+aJgOacieW/l+aEv+iAheWIl+ihqAogICAgICBpc1ZvbHVuOiBmYWxzZSwKICAgICAgLy/lv5fmhL/ogIXmiqXlkI3mmL7npLov6ZqQ6JePCiAgICAgIHVzZXJWb2x1bjogW10gLy/lv5fmhL/ogIXkv6Hmga8KCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgZ2V0VXNlckRhdGFCeVRva2VuKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIF90aGlzLnVzZXJJbmZvID0gcmVzOwogICAgfSk7CiAgICBnZXRBbGxWb2x1bnRlZXJSZXF1ZXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIHJlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKF90aGlzLnVzZXJJbmZvLmlkID09PSBpdGVtLnVfaWQpIHsKICAgICAgICAgIF90aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMuaXNWb2x1biA9IHRydWU7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBfdGhpcy52b2x1bnRlZXJMaXN0ID0gcmVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pLCB7fSwgewogICAgICAgICAgY3JlYXRldGltZTogZm9ybWF0WWVhcihpdGVtLmNyZWF0ZXRpbWUpLAogICAgICAgICAgdV9pZDogZm9ybWF0SUQoaXRlbS51X2lkKQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwogICAgZ2V0Vm9sdW50ZWVyQnlJZFJlcXVlc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgX3RoaXMudXNlclZvbHVuID0gcmVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pLCB7fSwgewogICAgICAgICAgY3JlYXRldGltZTogZm9ybWF0WWVhcihpdGVtLmNyZWF0ZXRpbWUpLAogICAgICAgICAgdV9pZDogZm9ybWF0SUQoaXRlbS51X2lkKQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgLy/miqXlkI3lv5fmhL/ogIUKICAgIGVudGVyVm9sdW46IGZ1bmN0aW9uIGVudGVyVm9sdW4oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZ2V0SGVhbHRoTm93RGF5QnlpZFJlcXVlc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAoIXJlcy5sZW5ndGgpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS53YXJuaW5nKCLkvaDku4rlpKnov5jmnKrlrozmiJDlgaXlurfloavmiqXvvIzor7flhYjlrozmiJDlgaXlurfloavmiqUiKTsKICAgICAgICB9CgogICAgICAgIGlmIChyZXNbMF0uUENSID09PSAi5ZCmIikgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmVycm9yKCLmirHmrYnvvIzkvaDlvZPliY3kuI3og73miqXlkI3lv5fmhL/ogIUiKTsKICAgICAgICB9CgogICAgICAgIF90aGlzMi4kY29uZmlybSgi5piv5ZCm56Gu6K6k5oql5ZCN5b+X5oS/6ICFPyIsICLmj5DnpLoiLCB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgZ2V0RW50ZXJWb2x1bnRlZXJSZXF1c2V0KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKCLmiqXlkI3miJDlip8h6K+3562J5b6F6ICB5biI5LiO5L2g6IGU57O7Iik7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS53YXJuaW5nKCLkvaDlt7Lnu4/lrozmiJDlv5fmhL/ogIXmiqXlkI3vvIzor7fli7/ph43lpI3mj5DkuqQiKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5pbmZvKCLlt7Llj5bmtogiKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["volunteer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA,SACA,kBADA,EAEA,0BAFA,EAGA,wBAHA,EAIA,sBAJA,EAKA,uBALA,QAMA,eANA;AAOA,SAAA,QAAA,EAAA,UAAA,QAAA,aAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AACA;AACA,MAAA,aAAA,EAAA,EAFA;AAEA;AACA,MAAA,OAAA,EAAA,KAHA;AAGA;AACA,MAAA,SAAA,EAAA,EAJA,CAIA;;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,OAVA,qBAUA;AAAA;;AACA,IAAA,kBAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,QAAA,GAAA,GAAA;AACA,KAFA;AAGA,IAAA,sBAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,GAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,CAAA,EAAA,KAAA,IAAA,CAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,SAAA,CAAA,YAAA;AACA,iBAAA,OAAA,GAAA,IAAA;AACA,WAFA;AAGA;AACA,OANA;AAOA,MAAA,KAAA,CAAA,aAAA,GAAA,GAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,+CACA,IADA;AAEA,UAAA,UAAA,EAAA,UAAA,CAAA,IAAA,CAAA,UAAA,CAFA;AAGA,UAAA,IAAA,EAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AAHA;AAKA,OANA,CAAA;AAOA,KAfA;AAgBA,IAAA,uBAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,GAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,+CACA,IADA;AAEA,UAAA,UAAA,EAAA,UAAA,CAAA,IAAA,CAAA,UAAA,CAFA;AAGA,UAAA,IAAA,EAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AAHA;AAKA,OANA,CAAA;AAOA,KATA;AAUA,GAxCA;AAyCA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,UAFA,wBAEA;AAAA;;AACA,MAAA,0BAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,CAAA,GAAA,CAAA,MAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,sBAAA;AACA;;AACA,YAAA,GAAA,CAAA,CAAA,CAAA,CAAA,GAAA,KAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,eAAA;AACA;;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA,IAAA,EAAA;AACA,UAAA,iBAAA,EAAA,IADA;AAEA,UAAA,gBAAA,EAAA,IAFA;AAGA,UAAA,IAAA,EAAA;AAHA,SAAA,EAKA,IALA,CAKA,YAAA;AACA,UAAA,wBAAA,GACA,IADA,CACA,YAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,gBAAA;AACA,WAHA,EAIA,KAJA,CAIA,UAAA,GAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,mBAAA;AACA,WANA;AAOA,SAbA,EAcA,KAdA,CAcA,YAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA,SAhBA;AAiBA,OAxBA;AAyBA;AA5BA;AAzCA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <el-card v-if=\"!isVolun\">\r\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align: center\">\r\n            <span>志愿者报名</span>\r\n          </div>\r\n          <div style=\"text-align: center\">\r\n            <el-button type=\"primary\" @click=\"enterVolun\">报名</el-button>\r\n          </div>\r\n        </el-card>\r\n        <el-card v-else-if=\"isVolun\">\r\n          <el-alert title=\"已报名志愿者\" type=\"success\" center show-icon>\r\n          </el-alert>\r\n          <el-table :data=\"userVolun\" border style=\"width: 100%\">\r\n            <el-table-column prop=\"u_id\" label=\"学号\"> </el-table-column>\r\n            <el-table-column prop=\"u_name\" label=\"姓名\"> </el-table-column>\r\n            <el-table-column prop=\"address\" label=\"分配地点\"> </el-table-column>\r\n            <el-table-column prop=\"group\" label=\"分配小组\"> </el-table-column>\r\n            <el-table-column prop=\"createtime\" label=\"报名时间\">\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n        <el-divider></el-divider>\r\n        <el-card>\r\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align: center\">\r\n            <span>志愿者名单</span>\r\n          </div>\r\n          <el-table\r\n            :data=\"volunteerList\"\r\n            style=\"width: 100%\"\r\n            :default-sort=\"{ prop: 'createtime', order: 'descending' }\"\r\n          >\r\n            <el-table-column\r\n              prop=\"createtime\"\r\n              label=\"报名日期\"\r\n              sortable\r\n              width=\"230\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column prop=\"u_id\" label=\"学号\" sortable width=\"230\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"u_name\" label=\"姓名\" sortable width=\"230\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"address\"\r\n              label=\"分配地点\"\r\n              sortable\r\n              width=\"230\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column prop=\"group\" label=\"分配小组\" sortable width=\"230\">\r\n            </el-table-column>\r\n          </el-table>\r\n\r\n          <div class=\"block\" style=\"text-align: center; margin-top: 20px\">\r\n            <el-pagination layout=\"prev, pager, next\" :total=\"50\">\r\n            </el-pagination>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getUserDataByToken,\r\n  getHealthNowDayByidRequest,\r\n  getEnterVolunteerRequset,\r\n  getAllVolunteerRequest,\r\n  getVolunteerByIdRequest,\r\n} from \"@/api/request\";\r\nimport { formatID, formatYear } from \"@/api/utils\";\r\nexport default {\r\n  name: \"volunteer\",\r\n  data() {\r\n    return {\r\n      userInfo: \"\", //用户个人信息\r\n      volunteerList: [], //所有志愿者列表\r\n      isVolun: false, //志愿者报名显示/隐藏\r\n      userVolun: [], //志愿者信息\r\n    };\r\n  },\r\n  created() {\r\n    getUserDataByToken().then((res) => {\r\n      this.userInfo = res;\r\n    });\r\n    getAllVolunteerRequest().then((res) => {\r\n      res.forEach((item) => {\r\n        if (this.userInfo.id === item.u_id) {\r\n          this.$nextTick(function () {\r\n            this.isVolun = true;\r\n          });\r\n        }\r\n      });\r\n      this.volunteerList = res.map((item) => {\r\n        return {\r\n          ...item,\r\n          createtime: formatYear(item.createtime),\r\n          u_id: formatID(item.u_id),\r\n        };\r\n      });\r\n    });\r\n    getVolunteerByIdRequest().then((res) => {\r\n      console.log(res);\r\n      this.userVolun = res.map((item) => {\r\n        return {\r\n          ...item,\r\n          createtime: formatYear(item.createtime),\r\n          u_id: formatID(item.u_id),\r\n        };\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    //报名志愿者\r\n    enterVolun() {\r\n      getHealthNowDayByidRequest().then((res) => {\r\n        if (!res.length) {\r\n          this.$message.warning(\"你今天还未完成健康填报，请先完成健康填报\");\r\n        }\r\n        if (res[0].PCR === \"否\") {\r\n          this.$message.error(\"抱歉，你当前不能报名志愿者\");\r\n        }\r\n        this.$confirm(\"是否确认报名志愿者?\", \"提示\", {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        })\r\n          .then(() => {\r\n            getEnterVolunteerRequset()\r\n              .then(() => {\r\n                this.$message.success(\"报名成功!请等待老师与你联系\");\r\n              })\r\n              .catch((err) => {\r\n                this.$message.warning(\"你已经完成志愿者报名，请勿重复提交\");\r\n              });\r\n          })\r\n          .catch(() => {\r\n            this.$message.info(\"已取消\");\r\n          });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"sourceRoot":"src/components/student"}]}