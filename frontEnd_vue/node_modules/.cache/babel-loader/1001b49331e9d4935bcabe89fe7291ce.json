{"remainingRequest":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\src\\components\\student\\healthTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\src\\components\\student\\healthTable.vue","mtime":1649514838946},{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\babel-loader\\lib\\index.js","mtime":1627202897183},{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js","mtime":1648636261085}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvXHU1MUFGXHU2RjQ3XHU2RDEyL0Rlc2t0b3AvQ2FtcHVzLWVwaWRlbWljLXByZXZlbnRpb24tYW5kLWNvbnRyb2wtc3lzdGUvVjIuMF9QcmV2ZW50aW9uL3Z1ZV9lcGlkZW1pYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGdldFVzZXJEYXRhQnlUb2tlbiwgZ2V0SGVhbHRoTm93RGF5QnlpZFJlcXVlc3QsIHNldGhlYWx0aFJlcXVlc3QgfSBmcm9tICJAL2FwaS9yZXF1ZXN0IjsKaW1wb3J0IHsgZm9ybWF0SUQgfSBmcm9tICdAL2FwaS91dGlscyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaGVhbHRoU2hvdzogdHJ1ZSwKICAgICAgLy/lgaXlurfooajljZXmmL7npLov6ZqQ6JePCiAgICAgIHVzZXJEYXRhTGlzdDogW10sCiAgICAgIC8v55So5oi35pWw5o2uCiAgICAgIHN1YkZyb21EYXRhOiBbXSwKICAgICAgLy/mj5DkuqTnmoTooajljZXmlbDmja4KICAgICAgaGVhbHRoRm9ybTogewogICAgICAgIHRlbXA6ICIiLAogICAgICAgIGlzSG90OiAiIiwKICAgICAgICBpc0xlYXZlOiAiIiwKICAgICAgICBQQ1I6ICIiCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBnZXRVc2VyRGF0YUJ5VG9rZW4oKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgX3RoaXMudXNlckRhdGFMaXN0LnB1c2goX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZXMpLCB7fSwgewogICAgICAgIGlkOiBmb3JtYXRJRChyZXMuaWQpCiAgICAgIH0pKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7CiAgICB9KTsKICAgIHRoaXMuZ2V0Tm93RGF5KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioNCiAgICAgKiDojrflj5blvZPlpKnmn5DnlKjmiLfmiqXooajlubbkuJTlhrPlrprmmK/lkKblhYHorrjloavlhpkNCiAgICAgKi8KICAgIGdldE5vd0RheTogZnVuY3Rpb24gZ2V0Tm93RGF5KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGdldEhlYWx0aE5vd0RheUJ5aWRSZXF1ZXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5sZW5ndGggPT0gMCkgX3RoaXMyLmhlYWx0aFNob3cgPSB0cnVlO2Vsc2UgewogICAgICAgICAgX3RoaXMyLmhlYWx0aFNob3cgPSBmYWxzZTsKCiAgICAgICAgICBfdGhpczIuc3ViRnJvbURhdGEucHVzaChyZXNbMF0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOaPkOS6pOWBpeW6t+ihqOWNlQ0KICAgICAqLwogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5oZWFsdGhGb3JtLnRlbXAgfHwgIXRoaXMuaGVhbHRoRm9ybS5pc0hvdCB8fCAhdGhpcy5oZWFsdGhGb3JtLmlzTGVhdmUgfHwgIXRoaXMuaGVhbHRoRm9ybS5QQ1IpIHRoaXMuJG1lc3NhZ2Uud2FybmluZygi5aGr5oql6KGo5LiN5Y+v55WZ56m6Iik7ZWxzZSB7CiAgICAgICAgdmFyIHJlZyA9IC9eKChbMC05XStcLlswLTldKlsxLTldWzAtOV0qKXwoWzAtOV0qWzEtOV1bMC05XSpcLlswLTldKyl8KFswLTldKlsxLTldWzAtOV0qKSkkLzsKICAgICAgICB2YXIgdGVtcEJvb2wgPSByZWcudGVzdCh0aGlzLmhlYWx0aEZvcm0udGVtcCk7CiAgICAgICAgaWYgKCF0ZW1wQm9vbCkgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLkvZPmuKnor7fovpPlhaXmlbDlrZciKTtlbHNlIHsKICAgICAgICAgIHNldGhlYWx0aFJlcXVlc3QoewogICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy5oZWFsdGhGb3JtLnRlbXAsCiAgICAgICAgICAgIGlzSG90OiB0aGlzLmhlYWx0aEZvcm0uaXNIb3QsCiAgICAgICAgICAgIGlzTGVhdmU6IHRoaXMuaGVhbHRoRm9ybS5pc0xlYXZlLAogICAgICAgICAgICBQQ1I6IHRoaXMuaGVhbHRoRm9ybS5QQ1IKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICBtZXNzYWdlOiAi5o+Q5Lqk5oiQ5YqfIgogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmIChyZXMubGVuZ3RoICE9IDApIHsKICAgICAgICAgICAgICBfdGhpczMuZ2V0Tm93RGF5KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiDmj5DkuqTlgaXlurfooajljZXlvLnnqpcNCiAgICAgKi8KICAgIHBvcFVwOiBmdW5jdGlvbiBwb3BVcCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtKCLmj5DkuqTlgaXlurfmiqXooagsIOaYr+WQpue7p+e7rT8iLCAi5o+Q56S6IiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0Lm9uU3VibWl0KCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuJG1lc3NhZ2UuaW5mbyh7CiAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICBtZXNzYWdlOiAi5bey5Y+W5raI5o+Q5LqkIgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["healthTable.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <el-card>\r\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align: center\">\r\n            <span>健康信息上报</span>\r\n          </div>\r\n          <el-table :data=\"userDataList\" border style=\"width: 100%\">\r\n            <el-table-column prop=\"username\" label=\"姓名\"> </el-table-column>\r\n            <el-table-column prop=\"classes\" label=\"班级\"> </el-table-column>\r\n            <el-table-column prop=\"id\" label=\"学号\"> </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n        <el-divider></el-divider>\r\n\r\n        <el-card v-if=\"!healthShow\">\r\n          <div slot=\"header\" style=\"text-align: center\">\r\n            <span>今日检测情况</span>\r\n          </div>\r\n          <el-alert title=\"今日申请表提交成功\" type=\"success\" center show-icon>\r\n          </el-alert>\r\n          <el-table :data=\"subFromData\" border style=\"width: 100%\">\r\n            <el-table-column prop=\"temperature\" label=\"当前体温\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"isHot\" label=\"是否发热、咳嗽\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"isLeave\" label=\"是否离开过学校\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"PCR\" label=\"核酸检测是否为阴性\">\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n\r\n        <el-card v-else-if=\"healthShow\">\r\n          <el-form ref=\"form\" :model=\"healthForm\" label-width=\"150px\">\r\n            <el-form-item label=\"当前体温\">\r\n              <el-input v-model=\"healthForm.temp\" style=\"width: 130px\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"是否发热、咳嗽\">\r\n              <el-radio-group v-model=\"healthForm.isHot\">\r\n                <el-radio label=\"否\"></el-radio>\r\n                <el-radio label=\"是\"></el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"是否离开过学校\">\r\n              <el-radio-group v-model=\"healthForm.isLeave\">\r\n                <el-radio label=\"否\"></el-radio>\r\n                <el-radio label=\"是\"></el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"核酸检测是否为阴性\">\r\n              <el-radio-group v-model=\"healthForm.PCR\">\r\n                <el-radio label=\"否\"></el-radio>\r\n                <el-radio label=\"是\"></el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"popUp\">提交</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getUserDataByToken,\r\n  getHealthNowDayByidRequest,\r\n  sethealthRequest,\r\n} from \"@/api/request\";\r\nimport { formatID } from '@/api/utils';\r\nexport default {\r\n  data() {\r\n    return {\r\n      healthShow: true, //健康表单显示/隐藏\r\n      userDataList: [], //用户数据\r\n      subFromData: [], //提交的表单数据\r\n      healthForm: {\r\n        temp: \"\",\r\n        isHot: \"\",\r\n        isLeave: \"\",\r\n        PCR:\"\",\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    getUserDataByToken()\r\n      .then((res) => {\r\n        this.userDataList.push({\r\n          ...res,\r\n          id:formatID(res.id)\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.getNowDay();\r\n  },\r\n  methods: {\r\n    /**\r\n     * 获取当天某用户报表并且决定是否允许填写\r\n     */\r\n    getNowDay() {\r\n      getHealthNowDayByidRequest().then((res) => {\r\n        if (res.length == 0) this.healthShow = true;\r\n        else {\r\n          this.healthShow = false;\r\n          this.subFromData.push(res[0]);\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 提交健康表单\r\n     */\r\n    onSubmit() {\r\n      if (\r\n        !this.healthForm.temp ||\r\n        !this.healthForm.isHot ||\r\n        !this.healthForm.isLeave ||\r\n        !this.healthForm.PCR\r\n      )\r\n        this.$message.warning(\"填报表不可留空\");\r\n      else {\r\n        let reg =\r\n          /^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$/;\r\n        let tempBool = reg.test(this.healthForm.temp);\r\n        if (!tempBool) this.$message.warning(\"体温请输入数字\");\r\n        else {\r\n          sethealthRequest({\r\n            temperature: this.healthForm.temp,\r\n            isHot: this.healthForm.isHot,\r\n            isLeave: this.healthForm.isLeave,\r\n            PCR:this.healthForm.PCR\r\n          }).then((res) => {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"提交成功\",\r\n            });\r\n            if (res.length != 0) {\r\n              this.getNowDay();\r\n            }\r\n          });\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * 提交健康表单弹窗\r\n     */\r\n    popUp() {\r\n      this.$confirm(\"提交健康报表, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          this.onSubmit();\r\n        })\r\n        .catch(() => {\r\n          this.$message.info({\r\n            type: \"info\",\r\n            message: \"已取消提交\",\r\n          });\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>\r\n"],"sourceRoot":"src/components/student"}]}