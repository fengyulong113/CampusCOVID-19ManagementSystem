{"remainingRequest":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\src\\components\\student\\volunteer.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\src\\components\\student\\volunteer.vue","mtime":1649515988844},{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\babel-loader\\lib\\index.js","mtime":1627202897183},{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js","mtime":1648636261085}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOi9Vc2Vycy9cdTUxQUZcdTZGNDdcdTZEMTIvRGVza3RvcC9DYW1wdXMtZXBpZGVtaWMtcHJldmVudGlvbi1hbmQtY29udHJvbC1zeXN0ZS9WMi4wX1ByZXZlbnRpb24vdnVlX2VwaWRlbWljL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0VXNlckRhdGFCeVRva2VuLCBnZXRIZWFsdGhOb3dEYXlCeWlkUmVxdWVzdCwgZ2V0RW50ZXJWb2x1bnRlZXJSZXF1c2V0LCBnZXRBbGxWb2x1bnRlZXJSZXF1ZXN0LCBnZXRWb2x1bnRlZXJCeUlkUmVxdWVzdCB9IGZyb20gIkAvYXBpL3JlcXVlc3QiOwppbXBvcnQgeyBmb3JtYXRJRCwgZm9ybWF0WWVhciB9IGZyb20gJ0AvYXBpL3V0aWxzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJ2b2x1bnRlZXIiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VySW5mbzogIiIsCiAgICAgIC8v55So5oi35Liq5Lq65L+h5oGvCiAgICAgIHZvbHVudGVlckxpc3Q6IFtdLAogICAgICAvL+aJgOacieW/l+aEv+iAheWIl+ihqAogICAgICBpc1ZvbHVuOiBmYWxzZSwKICAgICAgdXNlclZvbHVuOiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGdldFVzZXJEYXRhQnlUb2tlbigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBfdGhpcy51c2VySW5mbyA9IHJlczsKICAgIH0pOwogICAgZ2V0QWxsVm9sdW50ZWVyUmVxdWVzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICByZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChfdGhpcy51c2VySW5mby5pZCA9PT0gaXRlbS51X2lkKSB7CiAgICAgICAgICBfdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmlzVm9sdW4gPSB0cnVlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgX3RoaXMudm9sdW50ZWVyTGlzdCA9IHJlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICAgIGNyZWF0ZXRpbWU6IGZvcm1hdFllYXIoaXRlbS5jcmVhdGV0aW1lKSwKICAgICAgICAgIHVfaWQ6IGZvcm1hdElEKGl0ZW0udV9pZCkKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKICAgIGdldFZvbHVudGVlckJ5SWRSZXF1ZXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIF90aGlzLnVzZXJWb2x1biA9IHJlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICAgIGNyZWF0ZXRpbWU6IGl0ZW0uY3JlYXRldGltZS5zbGljZSgwLCAxMCksCiAgICAgICAgICB1X2lkOiBTdHJpbmcoaXRlbS51X2lkKVswXSA9PT0gMSA/IFN0cmluZyhpdGVtLnVfaWQpIDogIjAiLmNvbmNhdChpdGVtLnVfaWQpCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+aKpeWQjeW/l+aEv+iAhQogICAgZW50ZXJWb2x1bjogZnVuY3Rpb24gZW50ZXJWb2x1bigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBnZXRIZWFsdGhOb3dEYXlCeWlkUmVxdWVzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmICghcmVzLmxlbmd0aCkgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLndhcm5pbmcoIuS9oOS7iuWkqei/mOacquWujOaIkOWBpeW6t+Whq+aKpe+8jOivt+WFiOWujOaIkOWBpeW6t+Whq+aKpSIpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlc1swXS5QQ1IgPT09ICLlkKYiKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IoIuaKseatie+8jOS9oOW9k+WJjeS4jeiDveaKpeWQjeW/l+aEv+iAhSIpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMyLiRjb25maXJtKCLmmK/lkKbnoa7orqTmiqXlkI3lv5fmhL/ogIU/IiwgIuaPkOekuiIsIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBnZXRFbnRlclZvbHVudGVlclJlcXVzZXQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MoIuaKpeWQjeaIkOWKnyHor7fnrYnlvoXogIHluIjkuI7kvaDogZTns7siKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLndhcm5pbmcoIuS9oOW3sue7j+WujOaIkOW/l+aEv+iAheaKpeWQje+8jOivt+WLv+mHjeWkjeaPkOS6pCIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmluZm8oIuW3suWPlua2iCIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["volunteer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <el-card v-if=\"!isVolun\">\r\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align: center\">\r\n            <span>志愿者报名</span>\r\n          </div>\r\n          <div style=\"text-align: center\">\r\n            <el-button type=\"primary\" @click=\"enterVolun\">报名</el-button>\r\n          </div>\r\n        </el-card>\r\n        <el-card v-else-if=\"isVolun\">\r\n          <el-alert title=\"已报名志愿者\" type=\"success\" center show-icon>\r\n          </el-alert>\r\n          <el-table :data=\"userVolun\" border style=\"width: 100%\">\r\n            <el-table-column prop=\"u_id\" label=\"学号\"> </el-table-column>\r\n            <el-table-column prop=\"u_name\" label=\"姓名\"> </el-table-column>\r\n            <el-table-column prop=\"address\" label=\"分配地点\"> </el-table-column>\r\n            <el-table-column prop=\"group\" label=\"分配小组\"> </el-table-column>\r\n            <el-table-column prop=\"createtime\" label=\"报名时间\">\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n        <el-divider></el-divider>\r\n        <el-card>\r\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align: center\">\r\n            <span>志愿者名单</span>\r\n          </div>\r\n          <el-table\r\n            :data=\"volunteerList\"\r\n            style=\"width: 100%\"\r\n            :default-sort=\"{ prop: 'createtime', order: 'descending' }\"\r\n          >\r\n            <el-table-column\r\n              prop=\"createtime\"\r\n              label=\"报名日期\"\r\n              sortable\r\n              width=\"230\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column prop=\"u_id\" label=\"学号\" sortable width=\"230\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"u_name\" label=\"姓名\" sortable width=\"230\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"address\"\r\n              label=\"分配地点\"\r\n              sortable\r\n              width=\"230\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column prop=\"group\" label=\"分配小组\" sortable width=\"230\">\r\n            </el-table-column>\r\n          </el-table>\r\n\r\n          <div class=\"block\" style=\"text-align: center; margin-top: 20px\">\r\n            <el-pagination layout=\"prev, pager, next\" :total=\"50\">\r\n            </el-pagination>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getUserDataByToken,\r\n  getHealthNowDayByidRequest,\r\n  getEnterVolunteerRequset,\r\n  getAllVolunteerRequest,\r\n  getVolunteerByIdRequest,\r\n} from \"@/api/request\";\r\nimport { formatID, formatYear } from '@/api/utils';\r\nexport default {\r\n  name: \"volunteer\",\r\n  data() {\r\n    return {\r\n      userInfo: \"\", //用户个人信息\r\n      volunteerList: [], //所有志愿者列表\r\n      isVolun: false,\r\n      userVolun: [],\r\n    };\r\n  },\r\n  created() {\r\n    getUserDataByToken().then((res) => {\r\n      this.userInfo = res\r\n    });\r\n    getAllVolunteerRequest().then((res) => {\r\n      res.forEach((item) => {\r\n        if (this.userInfo.id === item.u_id) {\r\n          this.$nextTick(function () {\r\n            this.isVolun = true;\r\n          });\r\n        }\r\n      });\r\n      this.volunteerList = res.map((item) => {\r\n        return {\r\n          ...item,\r\n          createtime: formatYear(item.createtime),\r\n          u_id:formatID(item.u_id)\r\n        };\r\n      });\r\n    });\r\n    getVolunteerByIdRequest().then((res) => {\r\n      console.log(res);\r\n      this.userVolun = res.map((item) => {\r\n        return {\r\n          ...item,\r\n          createtime: item.createtime.slice(0, 10),\r\n          u_id:\r\n            String(item.u_id)[0] === 1 ? String(item.u_id) : `0${item.u_id}`,\r\n        };\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    //报名志愿者\r\n    enterVolun() {\r\n      getHealthNowDayByidRequest().then((res) => {\r\n        if (!res.length) {\r\n          this.$message.warning(\"你今天还未完成健康填报，请先完成健康填报\");\r\n        }\r\n        if (res[0].PCR === \"否\") {\r\n          this.$message.error(\"抱歉，你当前不能报名志愿者\");\r\n        }\r\n        this.$confirm(\"是否确认报名志愿者?\", \"提示\", {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        })\r\n          .then(() => {\r\n            getEnterVolunteerRequset()\r\n              .then(() => {\r\n                this.$message.success(\"报名成功!请等待老师与你联系\");\r\n              })\r\n              .catch((err) => {\r\n                this.$message.warning(\"你已经完成志愿者报名，请勿重复提交\");\r\n              });\r\n          })\r\n          .catch(() => {\r\n            this.$message.info(\"已取消\");\r\n          });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"sourceRoot":"src/components/student"}]}