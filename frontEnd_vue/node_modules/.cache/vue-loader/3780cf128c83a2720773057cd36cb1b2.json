{"remainingRequest":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\src\\components\\student\\healthTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\src\\components\\student\\healthTable.vue","mtime":1649515230156},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1627202897183},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1648636261085}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBnZXRVc2VyRGF0YUJ5VG9rZW4sDQogIGdldEhlYWx0aE5vd0RheUJ5aWRSZXF1ZXN0LA0KICBzZXRIZWFsdGhSZXF1ZXN0LA0KfSBmcm9tICJAL2FwaS9yZXF1ZXN0IjsNCmltcG9ydCB7IGZvcm1hdElEIH0gZnJvbSAnQC9hcGkvdXRpbHMnOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBoZWFsdGhTaG93OiB0cnVlLCAvL+WBpeW6t+ihqOWNleaYvuekui/pmpDol48NCiAgICAgIHVzZXJEYXRhTGlzdDogW10sIC8v55So5oi35pWw5o2uDQogICAgICBzdWJGcm9tRGF0YTogW10sIC8v5o+Q5Lqk55qE6KGo5Y2V5pWw5o2uDQogICAgICBoZWFsdGhGb3JtOiB7DQogICAgICAgIHRlbXA6ICIiLA0KICAgICAgICBpc0hvdDogIiIsDQogICAgICAgIGlzTGVhdmU6ICIiLA0KICAgICAgICBQQ1I6IiIsDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgZ2V0VXNlckRhdGFCeVRva2VuKCkNCiAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgdGhpcy51c2VyRGF0YUxpc3QucHVzaCh7DQogICAgICAgICAgLi4ucmVzLA0KICAgICAgICAgIGlkOmZvcm1hdElEKHJlcy5pZCkNCiAgICAgICAgfSk7DQogICAgICB9KQ0KICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpOw0KICAgIHRoaXMuZ2V0Tm93RGF5KCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvKioNCiAgICAgKiDojrflj5blvZPlpKnmn5DnlKjmiLfmiqXooajlubbkuJTlhrPlrprmmK/lkKblhYHorrjloavlhpkNCiAgICAgKi8NCiAgICBnZXROb3dEYXkoKSB7DQogICAgICBnZXRIZWFsdGhOb3dEYXlCeWlkUmVxdWVzdCgpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBpZiAocmVzLmxlbmd0aCA9PSAwKSB0aGlzLmhlYWx0aFNob3cgPSB0cnVlOw0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICB0aGlzLmhlYWx0aFNob3cgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLnN1YkZyb21EYXRhLnB1c2gocmVzWzBdKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDmj5DkuqTlgaXlurfooajljZUNCiAgICAgKi8NCiAgICBvblN1Ym1pdCgpIHsNCiAgICAgIGlmICgNCiAgICAgICAgIXRoaXMuaGVhbHRoRm9ybS50ZW1wIHx8DQogICAgICAgICF0aGlzLmhlYWx0aEZvcm0uaXNIb3QgfHwNCiAgICAgICAgIXRoaXMuaGVhbHRoRm9ybS5pc0xlYXZlIHx8DQogICAgICAgICF0aGlzLmhlYWx0aEZvcm0uUENSDQogICAgICApDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygi5aGr5oql6KGo5LiN5Y+v55WZ56m6Iik7DQogICAgICBlbHNlIHsNCiAgICAgICAgbGV0IHJlZyA9DQogICAgICAgICAgL14oKFswLTldK1wuWzAtOV0qWzEtOV1bMC05XSopfChbMC05XSpbMS05XVswLTldKlwuWzAtOV0rKXwoWzAtOV0qWzEtOV1bMC05XSopKSQvOw0KICAgICAgICBsZXQgdGVtcEJvb2wgPSByZWcudGVzdCh0aGlzLmhlYWx0aEZvcm0udGVtcCk7DQogICAgICAgIGlmICghdGVtcEJvb2wpIHRoaXMuJG1lc3NhZ2Uud2FybmluZygi5L2T5rip6K+36L6T5YWl5pWw5a2XIik7DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgIHNldEhlYWx0aFJlcXVlc3Qoew0KICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHRoaXMuaGVhbHRoRm9ybS50ZW1wLA0KICAgICAgICAgICAgaXNIb3Q6IHRoaXMuaGVhbHRoRm9ybS5pc0hvdCwNCiAgICAgICAgICAgIGlzTGVhdmU6IHRoaXMuaGVhbHRoRm9ybS5pc0xlYXZlLA0KICAgICAgICAgICAgUENSOnRoaXMuaGVhbHRoRm9ybS5QQ1INCiAgICAgICAgICB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICLmj5DkuqTmiJDlip8iLA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZiAocmVzLmxlbmd0aCAhPSAwKSB7DQogICAgICAgICAgICAgIHRoaXMuZ2V0Tm93RGF5KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOaPkOS6pOWBpeW6t+ihqOWNleW8ueeqlw0KICAgICAqLw0KICAgIHBvcFVwKCkgew0KICAgICAgdGhpcy4kY29uZmlybSgi5o+Q5Lqk5YGl5bq35oql6KGoLCDmmK/lkKbnu6fnu60/IiwgIuaPkOekuiIsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwNCiAgICAgICAgdHlwZTogIndhcm5pbmciLA0KICAgICAgfSkNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMub25TdWJtaXQoKTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oIuW3suWPlua2iOaPkOS6pCIpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["healthTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"healthTable.vue","sourceRoot":"src/components/student","sourcesContent":["<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <el-card>\r\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align: center\">\r\n            <span>健康信息上报</span>\r\n          </div>\r\n          <el-table :data=\"userDataList\" border style=\"width: 100%\">\r\n            <el-table-column prop=\"username\" label=\"姓名\"> </el-table-column>\r\n            <el-table-column prop=\"classes\" label=\"班级\"> </el-table-column>\r\n            <el-table-column prop=\"id\" label=\"学号\"> </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n        <el-divider></el-divider>\r\n\r\n        <el-card v-if=\"!healthShow\">\r\n          <div slot=\"header\" style=\"text-align: center\">\r\n            <span>今日检测情况</span>\r\n          </div>\r\n          <el-alert title=\"今日申请表提交成功\" type=\"success\" center show-icon>\r\n          </el-alert>\r\n          <el-table :data=\"subFromData\" border style=\"width: 100%\">\r\n            <el-table-column prop=\"temperature\" label=\"当前体温\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"isHot\" label=\"是否发热、咳嗽\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"isLeave\" label=\"是否离开过学校\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"PCR\" label=\"核酸检测是否为阴性\">\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n\r\n        <el-card v-else-if=\"healthShow\">\r\n          <el-form ref=\"form\" :model=\"healthForm\" label-width=\"150px\">\r\n            <el-form-item label=\"当前体温\">\r\n              <el-input v-model=\"healthForm.temp\" style=\"width: 130px\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"是否发热、咳嗽\">\r\n              <el-radio-group v-model=\"healthForm.isHot\">\r\n                <el-radio label=\"否\"></el-radio>\r\n                <el-radio label=\"是\"></el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"是否离开过学校\">\r\n              <el-radio-group v-model=\"healthForm.isLeave\">\r\n                <el-radio label=\"否\"></el-radio>\r\n                <el-radio label=\"是\"></el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"核酸检测是否为阴性\">\r\n              <el-radio-group v-model=\"healthForm.PCR\">\r\n                <el-radio label=\"否\"></el-radio>\r\n                <el-radio label=\"是\"></el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"popUp\">提交</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getUserDataByToken,\r\n  getHealthNowDayByidRequest,\r\n  setHealthRequest,\r\n} from \"@/api/request\";\r\nimport { formatID } from '@/api/utils';\r\nexport default {\r\n  data() {\r\n    return {\r\n      healthShow: true, //健康表单显示/隐藏\r\n      userDataList: [], //用户数据\r\n      subFromData: [], //提交的表单数据\r\n      healthForm: {\r\n        temp: \"\",\r\n        isHot: \"\",\r\n        isLeave: \"\",\r\n        PCR:\"\",\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    getUserDataByToken()\r\n      .then((res) => {\r\n        this.userDataList.push({\r\n          ...res,\r\n          id:formatID(res.id)\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.getNowDay();\r\n  },\r\n  methods: {\r\n    /**\r\n     * 获取当天某用户报表并且决定是否允许填写\r\n     */\r\n    getNowDay() {\r\n      getHealthNowDayByidRequest().then((res) => {\r\n        if (res.length == 0) this.healthShow = true;\r\n        else {\r\n          this.healthShow = false;\r\n          this.subFromData.push(res[0]);\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 提交健康表单\r\n     */\r\n    onSubmit() {\r\n      if (\r\n        !this.healthForm.temp ||\r\n        !this.healthForm.isHot ||\r\n        !this.healthForm.isLeave ||\r\n        !this.healthForm.PCR\r\n      )\r\n        this.$message.warning(\"填报表不可留空\");\r\n      else {\r\n        let reg =\r\n          /^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$/;\r\n        let tempBool = reg.test(this.healthForm.temp);\r\n        if (!tempBool) this.$message.warning(\"体温请输入数字\");\r\n        else {\r\n          setHealthRequest({\r\n            temperature: this.healthForm.temp,\r\n            isHot: this.healthForm.isHot,\r\n            isLeave: this.healthForm.isLeave,\r\n            PCR:this.healthForm.PCR\r\n          }).then((res) => {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"提交成功\",\r\n            });\r\n            if (res.length != 0) {\r\n              this.getNowDay();\r\n            }\r\n          });\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * 提交健康表单弹窗\r\n     */\r\n    popUp() {\r\n      this.$confirm(\"提交健康报表, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          this.onSubmit();\r\n        })\r\n        .catch(() => {\r\n          this.$message.info(\"已取消提交\");\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>\r\n"]}]}