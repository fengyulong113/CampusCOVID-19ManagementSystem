{"remainingRequest":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\src\\components\\main\\myNotice.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\src\\components\\main\\myNotice.vue","mtime":1648615643431},{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\babel-loader\\lib\\index.js","mtime":1627202897183},{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"C:\\Users\\冯潇洒\\Desktop\\Campus-epidemic-prevention-and-control-syste\\V2.0_Prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js","mtime":1648636261085}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc2hvdzogdHJ1ZSwKICAgICAgICAgICAgVXNlclNpemU6IDAsCiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICAgICAgICB0YWJsZURhdGE6IFtdLAogICAgICAgICAgICBwYWdlU2l6ZTogNSwKICAgICAgICAgICAgcGFnZU5vOiAxLAogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMuZ2V0dmFsdWUodGhpcy5wYWdlU2l6ZSwgdGhpcy5wYWdlTm8pOwogICAgfSwKICAgIGZpbHRlcnM6IHsKICAgICAgICBkYXRlKHRpbWUpIHsKICAgICAgICAgICAgdmFyIGR0ID0gbmV3IERhdGUodGltZSk7CiAgICAgICAgICAgIC8vIHl5eXktbW0tZGQKICAgICAgICAgICAgdmFyIHkgPSBkdC5nZXRGdWxsWWVhcigpOwogICAgICAgICAgICB2YXIgbSA9IGR0LmdldE1vbnRoKCkgKyAxOwogICAgICAgICAgICB2YXIgZCA9IGR0LmdldERhdGUoKTsKICAgICAgICAgICAgdmFyIGhoID0gZHQuZ2V0SG91cnMoKTsKICAgICAgICAgICAgdmFyIG1tID0gZHQuZ2V0TWludXRlcygpOwogICAgICAgICAgICB2YXIgc3MgPSBkdC5nZXRTZWNvbmRzKCk7CiAgICAgICAgICAgIHJldHVybiB5ICsgIi0iICsgbSArICItIiArIGQgKyAiICAiICsgaGggKyAiOiIgKyBtbSArICI6IiArIHNzCiAgICAgICAgfSwKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgb3BlbjIodikgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHYsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDlt7Lor7vkuI7mnKror7vovazmjaIKICAgICAgICAgKiBAcGFyYW0gaW5kZXgKICAgICAgICAgKiBAcGFyYW0gcm93CiAgICAgICAgICovCiAgICAgICAgcmVhZE4oaW5kZXgsIHJvdykgewogICAgICAgICAgICB0aGlzLiRheGlvc2p3dCh7CiAgICAgICAgICAgICAgICB1cmw6Ii9zdHVkZW50cy9nb3dlaWR1IiwKICAgICAgICAgICAgICAgIG1ldGhvZDoiZ2V0IiwKICAgICAgICAgICAgICAgIGRhdGE6ewogICAgICAgICAgICAgICAgICAgIG5faWQ6cm93Lm5faWQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWNjZXNzOiAocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuMign5bey5L+u5pS55Li65pyq6K+7JykKICAgICAgICAgICAgICAgICAgICB0aGlzLmdldHZhbHVlKHRoaXMucGFnZVNpemUsIHRoaXMucGFnZU5vKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICByZWFkWShpbmRleCwgcm93KSB7CiAgICAgICAgICAgIHRoaXMuJGF4aW9zand0KHsKICAgICAgICAgICAgICAgIHVybDoiL3N0dWRlbnRzL2dveWlkdSIsCiAgICAgICAgICAgICAgICBtZXRob2Q6ImdldCIsCiAgICAgICAgICAgICAgICBkYXRhOnsKICAgICAgICAgICAgICAgICAgICBuX2lkOnJvdy5uX2lkCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3VjY2VzczogKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0bmV3KCkKICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW4yKCflt7Lkv67mlLnkuLrlt7Lor7snKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAoKCiAgICAgICAgLyoqCiAgICAgICAgICog5oiR55qE6YCa55+l5YiG6aG16I635Y+W5pWw5o2u5LiO5pWw6YePCiAgICAgICAgICogKi8KICAgICAgICBnZXR2YWx1ZShwYWdlTnVtLCBjdXJyUGFnZSkgewogICAgICAgICAgICB0aGlzLiRheGlvc2p3dCh7CiAgICAgICAgICAgICAgICB1cmw6ICIvc3R1ZGVudHMvZ2V0Tm90aWNlIiwKICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgcGFnZU51bTogcGFnZU51bSwKICAgICAgICAgICAgICAgICAgICBjdXJyUGFnZTogY3VyclBhZ2UgLSAxCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3VjY2VzczogKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuVXNlclNpemUgPSByZXN1bHQudG90YWw7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRhdGEuZm9yRWFjaCgodiwgaSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB2LnR5cGUxID0gIuacquivuyIKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzdWx0LmRhdGE7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRuZXcoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOiOt+WPlueahOaIkemAmuefpeW3suivu+WIl+ihqCjkvpvlt7Lor7vmnKror7vnirbmgIHmuLLmn5MpCiAgICAgICAgICovCiAgICAgICAgZ2V0bmV3KCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygi6L+b5YWlZ2V0bmV3IikKICAgICAgICAgICAgLy/nrYnlkIzkuo7nu5HlrpoKICAgICAgICAgICAgdGhpcy4kYXhpb3Nqd3QoewogICAgICAgICAgICAgICAgdXJsOiIvc3R1ZGVudHMvZ2V0Tm90aWNlUmVhZCIsCiAgICAgICAgICAgICAgICBtZXRob2Q6ImdldCIsCiAgICAgICAgICAgICAgICBkYXRhOnt9LAogICAgICAgICAgICAgICAgc3VjY2VzczogKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgICAgICAgIC8v5Yik5pat5piv5ZCm5bey6K+75pyq6K+7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZvckVhY2goKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gaXRlbS5uX2lkOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT0gdmFsdWUubl9pZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnR5cGUxID0gIuW3suivuyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAvL+WIhumhtQogICAgICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgICAgICAgIHRoaXMucGFnZVNpemUgPSB2YWw7CiAgICAgICAgICAgIHRoaXMuZ2V0dmFsdWUodGhpcy5wYWdlU2l6ZSwgdGhpcy5wYWdlTm8pCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICAgICAgICB0aGlzLnBhZ2VObyA9IHZhbDsKICAgICAgICAgICAgdGhpcy5nZXR2YWx1ZSh0aGlzLnBhZ2VTaXplLCB0aGlzLnBhZ2VObykKICAgICAgICB9CiAgICB9LAp9Cg=="},{"version":3,"sources":["myNotice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"myNotice.vue","sourceRoot":"src/components/main","sourcesContent":["<template>\r\n    <div>\r\n        <el-row>\r\n            <el-col :span=\"24\">\r\n                <el-card>\r\n                    <div slot=\"header\" class=\"clearfix\" style=\"text-align:center\">\r\n                        <span>我的通知</span>\r\n                    </div>\r\n                    <el-table\r\n                            :data=\"tableData\"\r\n                            border\r\n                            :default-sort=\"{prop: 'date', order: 'descending'}\"\r\n                            style=\"width: 100%\">\r\n                        <el-table-column\r\n                                prop=\"n_id\"\r\n                                sortable\r\n                                label=\"序列号\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                prop=\"title\"\r\n                                label=\"主题\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                prop=\"type1\"\r\n                                label=\"状态\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                label=\"创建时间\">\r\n                            <template slot-scope=\"scope\">{{ scope.row.createtime | date}}</template>\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                label=\"操作\">\r\n                            <template slot-scope=\"scope\">\r\n                                <el-button style=\"padding: 3px 0\" type=\"text\" @click=\"readN(scope.$index, scope.row)\">\r\n                                    未读\r\n                                </el-button>\r\n                                <el-button style=\"padding: 3px 0\" type=\"text\" @click=\"readY(scope.$index, scope.row)\">\r\n                                    已读\r\n                                </el-button>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                    <div class=\"block\" style=\"text-align:center;margin-top:20px\">\r\n                        <el-pagination\r\n                                @size-change=\"handleSizeChange\"\r\n                                @current-change=\"handleCurrentChange\"\r\n                                :current-page=\"currentPage\"\r\n                                :page-sizes=\"[5, 10, 15, 20,25]\"\r\n                                :page-size=\"5\"\r\n                                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                                :total=\"UserSize\">\r\n                        </el-pagination>\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                show: true,\r\n                UserSize: 0,\r\n                currentPage: 1,\r\n                tableData: [],\r\n                pageSize: 5,\r\n                pageNo: 1,\r\n            }\r\n        },\r\n        created() {\r\n            this.getvalue(this.pageSize, this.pageNo);\r\n        },\r\n        filters: {\r\n            date(time) {\r\n                var dt = new Date(time);\r\n                // yyyy-mm-dd\r\n                var y = dt.getFullYear();\r\n                var m = dt.getMonth() + 1;\r\n                var d = dt.getDate();\r\n                var hh = dt.getHours();\r\n                var mm = dt.getMinutes();\r\n                var ss = dt.getSeconds();\r\n                return y + \"-\" + m + \"-\" + d + \"  \" + hh + \":\" + mm + \":\" + ss\r\n            },\r\n        },\r\n        methods: {\r\n            open2(v) {\r\n                this.$message({\r\n                    message: v,\r\n                    type: 'success'\r\n                });\r\n            },\r\n            /**\r\n             * 已读与未读转换\r\n             * @param index\r\n             * @param row\r\n             */\r\n            readN(index, row) {\r\n                this.$axiosjwt({\r\n                    url:\"/students/goweidu\",\r\n                    method:\"get\",\r\n                    data:{\r\n                        n_id:row.n_id\r\n                    },\r\n                    success: (result) => {\r\n                        this.open2('已修改为未读')\r\n                        this.getvalue(this.pageSize, this.pageNo);\r\n                    }\r\n                });\r\n            },\r\n            readY(index, row) {\r\n                this.$axiosjwt({\r\n                    url:\"/students/goyidu\",\r\n                    method:\"get\",\r\n                    data:{\r\n                        n_id:row.n_id\r\n                    },\r\n                    success: (result) => {\r\n                        this.getnew()\r\n                        this.open2('已修改为已读')\r\n                    }\r\n                });\r\n            },\r\n\r\n\r\n            /**\r\n             * 我的通知分页获取数据与数量\r\n             * */\r\n            getvalue(pageNum, currPage) {\r\n                this.$axiosjwt({\r\n                    url: \"/students/getNotice\",\r\n                    method: \"get\",\r\n                    data: {\r\n                        pageNum: pageNum,\r\n                        currPage: currPage - 1\r\n                    },\r\n                    success: (result) => {\r\n                        this.UserSize = result.total;\r\n                        result.data.forEach((v, i) => {\r\n                            v.type1 = \"未读\"\r\n                        })\r\n                        this.tableData = result.data;\r\n                        this.getnew()\r\n                    }\r\n                });\r\n            },\r\n            /**\r\n             * 获取的我通知已读列表(供已读未读状态渲染)\r\n             */\r\n            getnew() {\r\n                console.log(\"进入getnew\")\r\n                //等同于绑定\r\n                this.$axiosjwt({\r\n                    url:\"/students/getNoticeRead\",\r\n                    method:\"get\",\r\n                    data:{},\r\n                    success: (result) => {\r\n                        //判断是否已读未读\r\n                        result.forEach(((item, index) => {\r\n                            let val = item.n_id;\r\n                            this.tableData.forEach((value, index) => {\r\n                                if (val == value.n_id) {\r\n                                    value.type1 = \"已读\"\r\n                                }\r\n                            })\r\n                        }))\r\n                    }\r\n                });\r\n            },\r\n            //分页\r\n            handleSizeChange(val) {\r\n                this.pageSize = val;\r\n                this.getvalue(this.pageSize, this.pageNo)\r\n            },\r\n            handleCurrentChange(val) {\r\n                this.pageNo = val;\r\n                this.getvalue(this.pageSize, this.pageNo)\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n"]}]}