{"remainingRequest":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\src\\components\\teacher\\assignVolun.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\src\\components\\teacher\\assignVolun.vue","mtime":1649564075495},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1627202897183},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637570406894},{"path":"D:\\fyl_Web\\CampusCOVID-19ManagementSystem\\frontEnd_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1648636261085}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBncm91cHMsIHBsYWNlcyB9IGZyb20gIkAvYXBpL3V0aWxzIjsNCmltcG9ydCB7IGdldEFsbFZvbHVudGVlckJ5VGVhY2hlclJlcXVlc3QsIHNldFZvbHVudGVlciB9IGZyb20gIkAvYXBpL3JlcXVlc3QiOw0KaW1wb3J0IHsgZm9ybWF0SUQsIGZvcm1hdFllYXIgfSBmcm9tICJAL2FwaS91dGlscyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJhc3NpZ24iLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB2b2x1bnRlZXJMaXN0Tm86IFtdLCAvL+acquWIhumFjeeahOW/l+aEv+iAheS/oeaBrw0KICAgICAgZ3JvdXBzOiBncm91cHMsIC8v5b+X5oS/5YiG6YWN57uE6buY6K6k5YC8DQogICAgICBncm91cDogIiIsIC8v5YiG6YWN57uEDQogICAgICBwbGFjZXM6IHBsYWNlcywgLy/lv5fmhL/liIbphY3lnLDngrnpu5jorqTlgLwNCiAgICAgIGFkZHJlc3M6ICIiLCAvL+WIhumFjeWcsOeCuQ0KICAgICAgYWxsVm9sdW50ZWVyOiBbXSwgLy/miYDmnInlv5fmhL/ogIUNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0QWxsVm9sdW50ZWVyKCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvKioNCiAgICAgKiDliIbphY3lnLDngrnlkozlsI/nu4QNCiAgICAgKi8NCiAgICBhbGxvdFZvbHVudGVlcihfLCByb3cpIHsNCiAgICAgIHNldFZvbHVudGVlcih7DQogICAgICAgIHVfaWQ6IE51bWJlcihyb3cudV9pZCksDQogICAgICAgIHVfbmFtZTogcm93LnVfbmFtZSwNCiAgICAgICAgYWRkcmVzczogdGhpcy5hZGRyZXNzLA0KICAgICAgICBncm91cDogdGhpcy5ncm91cCwNCiAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzKTsNCiAgICAgICAgICB0aGlzLmdldEFsbFZvbHVudGVlcigpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycikgPT4gdGhpcy4kbWVzc2FnZS5lcnJvcihlcnIpKTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOiOt+WPluaJgOacieW/l+aEv+iAhQ0KICAgICAqLw0KICAgIGdldEFsbFZvbHVudGVlcigpIHsNCiAgICAgIGdldEFsbFZvbHVudGVlckJ5VGVhY2hlclJlcXVlc3QoKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgbGV0IGFycmF5ID0gcmVzLm1hcCgoaXRlbSkgPT4gew0KICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAuLi5pdGVtLA0KICAgICAgICAgICAgY3JlYXRldGltZTogZm9ybWF0WWVhcihpdGVtLmNyZWF0ZXRpbWUpLA0KICAgICAgICAgICAgdV9pZDogZm9ybWF0SUQoaXRlbS51X2lkKSwNCiAgICAgICAgICB9Ow0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy52b2x1bnRlZXJMaXN0Tm8gPSBhcnJheS5maWx0ZXIoDQogICAgICAgICAgKGl0ZW0pID0+IGl0ZW0uYWRkcmVzcyA9PT0gbnVsbCAmJiBpdGVtLmdyb3VwID09PSBudWxsDQogICAgICAgICk7DQogICAgICAgIHRoaXMuYWxsVm9sdW50ZWVyID0gYXJyYXkuZmlsdGVyKA0KICAgICAgICAgIChpdGVtKSA9PiBpdGVtLmFkZHJlc3MgIT09IG51bGwgJiYgaXRlbS5ncm91cCAhPT0gbnVsbA0KICAgICAgICApOw0KICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["assignVolun.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"assignVolun.vue","sourceRoot":"src/components/teacher","sourcesContent":["<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col>\r\n        <el-card>\r\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align: center\">\r\n            <span>已报名志愿者名单</span>\r\n          </div>\r\n          <el-table\r\n            :data=\"volunteerListNo\"\r\n            border\r\n            :default-sort=\"{ prop: 'u_id', order: 'descending' }\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-table-column\r\n              prop=\"createtime\"\r\n              sortable\r\n              label=\"报名时间\"\r\n            ></el-table-column>\r\n            <el-table-column prop=\"u_id\" label=\"学号\"></el-table-column>\r\n            <el-table-column prop=\"u_name\" label=\"姓名\"> </el-table-column>\r\n            <el-table-column label=\"操作\" :width=\"500\">\r\n              <template slot-scope=\"scope\">\r\n                <el-select\r\n                  v-model=\"group\"\r\n                  placeholder=\"选择小组\"\r\n                  style=\"margin-left: 10px; width: 150px\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"item in groups\"\r\n                    :key=\"item.g_id\"\r\n                    :label=\"item.g_name\"\r\n                    :value=\"item.g_name\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n                <el-select\r\n                  v-model=\"address\"\r\n                  placeholder=\"选择地点\"\r\n                  style=\"margin-left: 10px\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"item in places\"\r\n                    :key=\"item.p_id\"\r\n                    :label=\"item.p_name\"\r\n                    :value=\"item.p_name\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n                <el-button\r\n                  style=\"margin: 10px 0 0 20px\"\r\n                  type=\"primary\"\r\n                  @click=\"allotVolunteer(scope.$index, scope.row)\"\r\n                  >确定</el-button\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n        <el-divider></el-divider>\r\n        <el-card>\r\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align: center\">\r\n            <span>现有志愿者</span>\r\n          </div>\r\n          <el-table\r\n            :data=\"allVolunteer\"\r\n            border\r\n            :default-sort=\"{ prop: 'createtime', order: 'descending' }\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-table-column\r\n              prop=\"createtime\"\r\n              sortable\r\n              label=\"报名时间\"\r\n            ></el-table-column>\r\n            <el-table-column prop=\"address\" label=\"地点\"></el-table-column>\r\n            <el-table-column prop=\"group\" label=\"小组\"></el-table-column>\r\n            <el-table-column prop=\"u_id\" label=\"学号\"></el-table-column>\r\n            <el-table-column prop=\"u_name\" label=\"姓名\"></el-table-column>\r\n          </el-table>\r\n          <div class=\"block\" style=\"text-align: center; margin-top: 20px\">\r\n            <el-pagination background layout=\"prev, pager, next\" :total=\"1000\">\r\n            </el-pagination>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { groups, places } from \"@/api/utils\";\r\nimport { getAllVolunteerByTeacherRequest, setVolunteer } from \"@/api/request\";\r\nimport { formatID, formatYear } from \"@/api/utils\";\r\nexport default {\r\n  name: \"assign\",\r\n  data() {\r\n    return {\r\n      volunteerListNo: [], //未分配的志愿者信息\r\n      groups: groups, //志愿分配组默认值\r\n      group: \"\", //分配组\r\n      places: places, //志愿分配地点默认值\r\n      address: \"\", //分配地点\r\n      allVolunteer: [], //所有志愿者\r\n    };\r\n  },\r\n  created() {\r\n    this.getAllVolunteer();\r\n  },\r\n  methods: {\r\n    /**\r\n     * 分配地点和小组\r\n     */\r\n    allotVolunteer(_, row) {\r\n      setVolunteer({\r\n        u_id: Number(row.u_id),\r\n        u_name: row.u_name,\r\n        address: this.address,\r\n        group: this.group,\r\n      })\r\n        .then((res) => {\r\n          this.$message.success(res);\r\n          this.getAllVolunteer();\r\n        })\r\n        .catch((err) => this.$message.error(err));\r\n    },\r\n    /**\r\n     * 获取所有志愿者\r\n     */\r\n    getAllVolunteer() {\r\n      getAllVolunteerByTeacherRequest().then((res) => {\r\n        let array = res.map((item) => {\r\n          return {\r\n            ...item,\r\n            createtime: formatYear(item.createtime),\r\n            u_id: formatID(item.u_id),\r\n          };\r\n        });\r\n        this.volunteerListNo = array.filter(\r\n          (item) => item.address === null && item.group === null\r\n        );\r\n        this.allVolunteer = array.filter(\r\n          (item) => item.address !== null && item.group !== null\r\n        );\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}